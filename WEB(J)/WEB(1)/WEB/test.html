<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>นวัตกรรมการท่องเที่ยว | กาฬสินธุ์</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="/manifest.json">
    <style>
        /* General Styles */
        body {
            font-family: 'Sarabun', sans-serif;
            margin: 0;
            background-color: #f4f7f6;
            color: #333;
            background-image: url('img/img4.jpg');
            background-attachment: fixed;
            background-size: cover;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header / Nav Bar */
        header {
            background-color: white;
            padding: 15px 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #2c5b4c;
        }
        nav a {
            margin: 0 15px;
            text-decoration: none;
            color: #555;
            font-weight: bold;
        }
        .auth-buttons a {
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 20px;
            margin-left: 10px;
        }
        .login-btn {
            background-color: transparent;
            border: 2px solid #2c5b4c;
            color: #2c5b4c;
        }
        .signup-btn {
            background-color: #2c5b4c;
            color: white;
        }

        /* Hero Section */
        .hero {
            background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1624624132214-a28a50ea24b5?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            color: white;
            text-align: center;
            padding: 100px 20px;
        }
        .hero h1 { font-size: 48px; margin-bottom: 10px; }
        .hero p { font-size: 20px; }

        /* Content Sections */
        .section { padding: 60px 0; }
        .section-title {
            text-align: center;
            font-size: 36px;
            margin-bottom: 40px;
            color: #111;
            background: rgba(255, 255, 255, 0.5);
            padding: 10px;
            border-radius: 10px;
            display: inline-block;
        }
        .section-title-wrapper {
            text-align: center;
            margin-bottom: 40px;
        }
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        .card {
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            overflow: hidden;
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .card:hover { transform: translateY(-10px); }
        .card-link { text-decoration: none; color: inherit; }
        .card img { width: 100%; height: 200px; object-fit: cover; }
        .card-content { padding: 20px; flex-grow: 1; }
        .card-content h3 { margin-top: 0; color: #000; }
        .card-content p { color: #111; }
        .review-summary { display: flex; align-items: center; gap: 15px; margin: 10px 0; font-size: 16px; }
        .stars { color: #ffc107; }
        .review-text .score { font-weight: bold; color: #111; }
        .review-text .review-count { color: #333; margin-left: 8px; }
        .more-button-container { text-align: center; margin-top: 40px; }
        .more-button { display: inline-block; background-color: #2c5b4c; color: white; padding: 12px 30px; border-radius: 25px; text-decoration: none; font-weight: bold; font-size: 16px; transition: background-color 0.3s, transform 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.15); }
        .more-button:hover { background-color: #3a7a65; transform: translateY(-3px); }

        /* Video Container */
        .video-container { text-align: center; margin-top: 40px; }
        
        /* Back to Top Button */
        .back-to-top {
            position: fixed; bottom: 90px; right: 20px; background-color: #2c5b4c; color: white;
            width: 50px; height: 50px; border-radius: 50%; display: flex; justify-content: center;
            align-items: center; font-size: 24px; text-decoration: none; opacity: 0;
            visibility: hidden; transition: opacity 0.4s, visibility 0.4s; z-index: 1000;
        }
        .back-to-top.show { opacity: 1; visibility: visible; }
        
        /* Fade-in Effect */
        .fade-in { opacity: 0; transform: translateY(30px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .fade-in.visible { opacity: 1; transform: translateY(0); }
        
        /* Footer */
        footer { background-color: #2c5b4c; color: white; text-align: center; padding: 20px; margin-top: 40px; }

        /* --- Chatbot "Nong Dino" Styles --- */
        #planner-icon { position: fixed; bottom: 30px; right: 30px; background-color: #ff5722; color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 28px; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.3); z-index: 1001; transition: all 0.3s ease; }
        #planner-icon:hover { transform: scale(1.1) rotate(20deg); }
        #planner-window { position: fixed; bottom: 100px; right: 30px; width: 380px; max-width: 90vw; height: 500px; max-height: 70vh; background-color: #f4f7f6; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); display: flex; flex-direction: column; overflow: hidden; z-index: 1000; transform: scale(0); transform-origin: bottom right; transition: transform 0.3s ease-in-out; }
        #planner-window.open { transform: scale(1); }
        .planner-header { background-color: #ff5722; color: white; padding: 15px; text-align: center; flex-shrink: 0; }
        .planner-header h3 { margin: 0; font-size: 18px; }
        .planner-body { padding: 10px; flex-grow: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; }
        .chat-message { padding: 10px 15px; border-radius: 18px; max-width: 80%; line-height: 1.5; word-wrap: break-word; }
        .chat-message.bot { background-color: #ffffff; color: black; border: 1px solid #eee; align-self: flex-start; border-top-left-radius: 5px; }
        .chat-message.user { background-color: #ff5722; color: white; align-self: flex-end; border-top-right-radius: 5px; }
        .loading-indicator { align-self: flex-start; display: flex; gap: 5px; padding: 10px 0; }
        .loading-indicator span { width: 8px; height: 8px; background-color: #ccc; border-radius: 50%; animation: bounce 1.4s infinite ease-in-out both; }
        .loading-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .loading-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }
        .map-container { width: 100%; height: 200px; border-radius: 10px; overflow: hidden; border: 1px solid #ddd; margin-top: 5px;}
        .map-container iframe { width: 100%; height: 100%; border: 0; }
        .planner-input-area { display: flex; padding: 10px; border-top: 1px solid #ddd; flex-shrink: 0; background-color: #fff; }
        #chat-input { flex-grow: 1; border: 1px solid #ccc; border-radius: 20px; padding: 10px 15px; font-size: 16px; font-family: 'Sarabun', sans-serif; }
        #send-button { background-color: #ff5722; color: white; border: none; border-radius: 50%; width: 40px; height: 40px; margin-left: 10px; font-size: 18px; cursor: pointer; transition: background-color 0.3s; }
        #send-button:hover { background-color: #e64a19; }
    </style>
</head>
<body>
    <a href="#" class="back-to-top">▲</a>

    <header>
        <div class="logo">Moonlight</div>
        <nav>
            <a href="#attractions">ที่ท่องเที่ยว</a>
            <a href="#restaurants">ร้านอาหาร</a>
            <a href="#accommodations">ห้องพัก</a>
        <a href="search.html" style="color: #ff5722; font-weight: bold; margin-left: 15px;">
        <i class="fas fa-search"></i> ค้นหา
        </nav>
        <div class="auth-buttons" id="auth-container"> 
    <a href="login.html" class="login-btn">เข้าสู่ระบบ</a>
    <a href="signup.html" class="signup-btn">สมัครสมาชิก</a>

    </a>
</a> 
        </a>
</div>
    </header>

    <section class="hero">
        <h1>นวัตกรรมการท่องเที่ยว จังหวัดกาฬสินธุ์</h1>
        <p>สัมผัสมิติใหม่ของการเดินทาง ค้นพบทุกความมหัศจรรย์ด้วยปลายนิ้ว</p>
    </section>

    <main class="container">
        <section id="attractions" class="section">
            <div class="section-title-wrapper">
                <h2 class="section-title">ที่ท่องเที่ยวแนะนำ</h2>
            </div>
            <div class="card-grid">
                <a href="sirindhorn-museum.html" class="card-link"><div class="card fade-in"><img src="img/img1.jpg" alt="พิพิธภัณฑ์สิรินธร"><div class="card-content"><h3>พิพิธภัณฑ์สิรินธร (ภูกุ้มข้าว)</h3><div class="review-summary"><div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i></div><div class="review-text"><span class="score">4.8</span><span class="review-count">(1,258 รีวิว)</span></div></div><p>ศูนย์วิจัยไดโนเสาร์และพิพิธภัณฑ์ธรณีวิทยาที่สมบูรณ์ที่สุดในอาเซียน</p></div></div></a>
                <a href="phra-that-yakhu.html" class="card-link"><div class="card fade-in"><img src="img/img3.jpg" alt="พระธาตุยาคู"><div class="card-content"><h3>พระธาตุยาคู (เมืองฟ้าแดดสงยาง)</h3><div class="review-summary"><div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i></div><div class="review-text"><span class="score">4.7</span><span class="review-count">(890 รีวิว)</span></div></div><p>เจดีย์สมัยทวารวดีที่ใหญ่ที่สุดในประเทศไทย โบราณสถานที่สำคัญของจังหวัด</p></div></div></a>
                <a href="wat-wang-kham.html" class="card-link"><div class="card fade-in"><img src="https://isan.tiewrussia.com/wat_wangkam/images/015.jpg" alt="วัดวังคำ"><div class="card-content"><h3>วัดวังคำ</h3><div class="review-summary"><div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i></div><div class="review-text"><span class="score">4.6</span><span class="review-count">(750 รีวิว)</span></div></div><p>วัดงดงามด้วยสถาปัตยกรรมล้านนาคล้ายวัดเชียงทองในหลวงพระบาง</p></div></div></a>
            </div>
            <div class="more-button-container">
                <a href="attractions-all.html" class="more-button">ดูที่เที่ยวทั้งหมด</a>
            </div>
        </section>

        <section id="restaurants" class="section">
            <div class="section-title-wrapper">
                <h2 class="section-title">ร้านอาหารและคาเฟ่</h2>
            </div>
            <div class="card-grid">
                <a href="ploen-kalasin.html" class="card-link"><div class="card fade-in"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTdCgLyrMwpNLt7OiS7AM7aKSvnp9r0A018Dw&s" alt="ร้านอาหาร"><div class="card-content"><h3>เพลิน กาฬสินธุ์</h3><div class="review-summary"><div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i></div><div class="review-text"><span class="score">4.4</span><span class="review-count">(210 รีวิว)</span></div></div><p>ร้านอาหารบรรยากาศดี มีดนตรีสด พร้อมเมนูหลากหลายใจกลางเมือง</p></div></div></a>
                <a href="somtum-sam-pee-nong.html" class="card-link"> <div class="card fade-in"> <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTsJF_1wgWeZ-CA2foIR_VjorrXHKC6FOzkvw&s" alt="ร้านส้มตำสามพี่น้อง"> <div class="card-content"> <h3>ส้มตำสามพี่น้อง</h3> <div class="review-summary"> <div class="stars"> <i class="fas fa-star"></i> <i class="fas fa-star"></i> <i class="fas fa-star"></i> <i class="fas fa-star"></i> <i class="fas fa-star"></i> </div> <div class="review-text"> <span class="score">5.0</span> <span class="review-count">(99 รีวิว)</span> </div> </div> <p>ร้านส้มตำชื่อดัง รสชาติจัดจ้าน ถูกใจคนท้องถิ่นและนักท่องเที่ยว</p> </div> </div> </a>
                <a href="berler-shabu.html" class="card-link"> <div class="card fade-in"> <img src="https://lh3.googleusercontent.com/gps-cs-s/AC9h4nozZ7gRoEiLor--_OfHjPdXCm-KdQA6fQzKqoC8Ma4mu0YnPEUaK7TlT4gxnqJ-5j57B4isAMinT8BaQJMloXKRB9CWEqTmRLWSGrF9J24zY7grj-Rr-WPcW6a_AUoGR2OZNBY=w408-h408-k-no" alt="เบ้อเร่อ ชาบูพันธุ์แท้"> <div class="card-content"> <h3>เบ้อเร่อ ชาบูพันธุ์แท้</h3> <div class="review-summary"> <div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i></div> <div class="review-text"><span class="score">4.8</span><span class="review-count">(550 รีวิว)</span></div> </div> <p>บุฟเฟ่ต์ชาบูและปิ้งย่างชื่อดัง ไลน์อาหารจัดเต็ม</p> </div> </div> </a>
            </div>
            <div class="more-button-container">
                <a href="restaurants-all.html" class="more-button">ดูร้านอาหารทั้งหมด</a>
            </div>
        </section>

        <section id="accommodations" class="section">
            <div class="section-title-wrapper">
                <h2 class="section-title">ที่พักและโรงแรม</h2>
            </div>
            <div class="card-grid">
                <a href="Suphak.html" class="card-link"><div class="card fade-in"><img src="https://img.wongnai.com/p/1920x0/2018/03/24/abe622c80a7a4d83973501f6638c8246.jpg" alt="โรงแรม"><div class="card-content"><h3>โรงแรมสุภัค</h3><div class="review-summary"><div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i><i class="far fa-star"></i></div><div class="review-text"><span class="score">3.7</span><span class="review-count">(310 รีวิว)</span></div></div><p>ที่พักสะอาด ราคาเป็นมิตร ใกล้สถานีขนส่งกาฬสินธุ์</p></div></div></a>
                <a href="Ratchapreuk.html" class="card-link"><div class="card fade-in"><img src="https://www.chuwab.com/images/hotel/1/12/3712/bimg_20160602111811.jpg" alt="รีสอร์ท"><div class="card-content"><h3>ราชพฤกษ์ รีสอร์ท</h3><div class="review-summary"><div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i></div><div class="review-text"><span class="score">4.0</span><span class="review-count">(280 รีวิว)</span></div></div><p>รีสอร์ทบรรยากาศเงียบสงบ เหมาะสำหรับการพักผ่อน</p></div></div></a>
                <a href="q-bis-the-base-kalasin.html" class="card-link"> <div class="card fade-in"> <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcStukjW36CXkc06NxY4XeV9xyDePzQ1uDtA4Q&s" alt="โรงแรม คิวบิส เดอะ เบส กาฬสินธุ์"> <div class="card-content"> <h3>โรงแรม คิวบิส เดอะ เบส กาฬสินธุ์</h3> <div class="review-summary"> <div class="stars"> <i class="fas fa-star"></i> <i class="fas fa-star"></i> <i class="fas fa-star"></i> <i class="fas fa-star"></i> <i class="fas fa-star"></i> </div> <div class="review-text"> <span class="score">5.0</span> <span class="review-count">(100 รีวิว)</span> </div> </div> <p>โรงแรมทันสมัยใจกลางเมืองกาฬสินธุ์ พร้อมสิ่งอำนวยความสะดวกครบครัน</p> </div> </div> </a>
            </div>
            <div class="more-button-container">
                <a href="hotels.html" class="more-button">ดูที่พักทั้งหมด</a>
            </div>
        </section>
    </main>

    <div class="video-container"> 
        <iframe 
            width="560" 
            height="315" 
            src="https://www.youtube.com/embed/Or3TOTkaDYw?si=WC_dOBXbqLoEQfVc&start=15"
            title="YouTube video player" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
            allowfullscreen>
        </iframe>
    </div>

   <footer>
    <p>© 2025 Kalasin Tourism Innovation Project | จัดทำเพื่อการศึกษา</p>
    <p><a href="admin.html" style="color: #a7c4bc; text-decoration: none;">สำหรับผู้ดูแลระบบ</a></p>
</footer>

    <div id="planner-icon">🦖</div>
    <div id="planner-window">
        <div class="planner-header">
            <h3>น้องไดโนช่วยแนะนำ!</h3>
        </div>
        <div class="planner-body" id="planner-body"></div>
        <div class="planner-input-area">
            <input type="text" id="chat-input" placeholder="ถามเรื่องเที่ยวกาฬสินธุ์...">
            <button id="send-button"><i class="fa fa-paper-plane"></i></button>
        </div>
    </div>

    <script>
    document.addEventListener("DOMContentLoaded", function() {
        // --- Main Page Scripts ---
        const fadeInElements = document.querySelectorAll('.fade-in');
        if (!!window.IntersectionObserver) {
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            fadeInElements.forEach(el => { observer.observe(el); });
        }

        const backToTopButton = document.querySelector('.back-to-top');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopButton.classList.add('show');
            } else {
                backToTopButton.classList.remove('show');
            }
        });

        // --- "Nong Dino" Chatbot Scripts ---
        const plannerIcon = document.getElementById('planner-icon');
        const plannerWindow = document.getElementById('planner-window');
        const plannerBody = document.getElementById('planner-body');
        const chatInput = document.getElementById('chat-input');
        const sendButton = document.getElementById('send-button');

        const API_KEY = "AIzaSyAlBAiO1L0To4V7mYR_Pak1t-orqxpfeEk"; // <--- ใส่ KEY ของคุณที่นี่
        
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${API_KEY}`;

        const systemInstruction = `
            คุณคือ "น้องไดโน" เป็น AI ผู้ช่วยเดินทางอัจฉริยะประจำจังหวัดกาฬสินธุ์โดยเฉพาะ คุณต้องสวมบทบาทเป็นไกด์ท้องถิ่นที่รอบรู้ พูดจาเป็นมิตร สนุกสนาน มีชีวิตชีวา และลงท้ายด้วย ครับ/ค่ะ/ค้าบ/จ้า เสมอ คุณต้องเข้าใจภาษาพูด ภาษาแชท หรือคำผิดเล็กๆ น้อยๆ ได้

            ### ข้อมูลทั่วไปของจังหวัดกาฬสินธุ์ (สำคัญมาก!)
            - **คำขวัญ:** เมืองฟ้าแดดสงยาง โปงลางเลิศล้ำ วัฒนธรรมผู้ไท ผ้าไหมแพรวา ผาเสวยภูพาน มหาธารลำปาว ไดโนเสาร์สัตว์โลกล้านปี
            - **ภูมิศาสตร์เด่น:** มีเขื่อนลำปาวซึ่งเป็นแหล่งน้ำขนาดใหญ่ และมีพื้นที่ติดกับเทือกเขาภูพาน
            - **อำเภอทั้ง 18 แห่ง:** เมืองกาฬสินธุ์, ยางตลาด, กมลาไสย, สหัสขันธ์, สมเด็จ, เขาวง, กุฉินารายณ์, ท่าคันโท, หนองกุงศรี, คำม่วง, ห้วยผึ้ง, ร่องคำ, ห้วยเม็ก, ฆ้องชัย, นามน, สามชัย, ดอนจาน, นาคู

            ### สภาพอากาศโดยทั่วไป (ไม่ต้องใช้ข้อมูลเรียลไทม์)
            - **หน้าร้อน (กุมภาพันธ์ - พฤษภาคม):** อากาศจะร้อนและแห้ง เหมาะกับการเที่ยวเขื่อนลำปาว หาดดอกเกดครับ
            - **หน้าฝน (พฤษภาคม - ตุลาคม):** อากาศจะชื้น มีฝนตก แต่ข้อดีคือต้นไม้ใบหญ้าจะเขียวขจีสวยงามมากครับ
            - **หน้าหนาว (ตุลาคม - กุมภาพันธ์):** อากาศจะเย็นสบาย เป็นช่วงที่น่าเที่ยวที่สุดของปีเลยครับ!

            ### ที่เที่ยวเด่น (พร้อมราคาและเวลาทำการ)
            - **พิพิธภัณฑ์สิรินธร (ภูกุ้มข้าว):** อยู่ อ.สหัสขันธ์ ศูนย์วิจัยไดโนเสาร์สมบูรณ์ที่สุดในอาเซียน
            - **พระธาตุยาคู (เมืองฟ้าแดดสงยาง):** อยู่ อ.กมลาไสย เจดีย์สมัยทวารวดีที่ใหญ่และสำคัญที่สุด
            - **สะพานเทพสุดา (เขื่อนลำปาว):** อยู่ อ.สหัสขันธ์ สะพานข้ามน้ำจืดที่ยาวที่สุดในไทย
            - **วัดวังคำ:** อยู่ อ.เขาวง วัดสวยสถาปัตยกรรมล้านนา
            - **หมู่บ้านทอผ้าไหมแพรวาบ้านโพน:** อยู่ อ.คำม่วง แหล่งซื้อของฝากเลื่องชื่อ

            ### ร้านอาหาร, คาเฟ่, และของดีกาฬสินธุ์ (อัปเดต)
            - **ไก่ย่างเขาสวนกวาง (มีหลายร้าน):** ร้านอาหารอีสานเด็ดแถวพิพิธภัณฑ์ ราคาเริ่มต้น 80-150 บาท
            - **ร้านตากะยาย:** ร้านอาหารพื้นบ้านริมน้ำปาว บรรยากาศดี ราคาประมาณ 100-250 บาท
            - **เพลิน กาฬสินธุ์:** ร้านอาหารในเมือง บรรยากาศดี มีดนตรีสดตอนเย็น เหมาะสำหรับมื้อค่ำครับ
            - **ส้มตำสามพี่น้อง:** ร้านส้มตำรสเด็ด ถูกใจคนท้องถิ่นและนักท่องเที่ยว
            - **Life's a Beach Cafe:** คาเฟ่ริมเขื่อนลำปาว บรรยากาศดีมาก เครื่องดื่ม 80-150 บาท
            - **ภูตะวันฟาร์ม:** คาเฟ่และฟาร์มแกะ มีมุมถ่ายรูปสวยๆ เครื่องดื่ม 70-120 บาท
            - **บ้านมอ ดีฮัก:** คาเฟ่กลางทุ่งนา บรรยากาศสบายๆ เหมาะกับการพักผ่อน
            - **ของฝากเด่น:** ผ้าไหมแพรวา, ไดโนเสาร์จำลอง, ไส้กรอกปลา, ข้าวเหนียวเขาวง

            ### ที่พักและโรงแรมแนะนำ (อัปเดต)
            - **โซนในตัวเมือง (เดินทางสะดวก):**
                - **โรงแรมริมปาว:** โรงแรมมาตรฐานใจกลางเมือง เหมาะสำหรับครอบครัวและนักธุรกิจ (800 - 1,500 บาท/คืน)
                - **โรงแรมสุภัค:** ที่พักราคาประหยัด ใกล้สถานีขนส่ง (500 - 800 บาท/คืน)
                - **ชาร์-ลอง บูทรีค:** โรงแรมบูทีคดีไซน์สวย ทันสมัย (900 - 1,800 บาท/คืน)
            - **โซนท่องเที่ยว/รอบนอก (บรรยากาศดี):**
                - **ราชพฤกษ์ รีสอร์ท:** รีสอร์ทบรรยากาศเงียบสงบ เหมาะแก่การพักผ่อน (700 - 1,200 บาท/คืน)
                - **ภูสวย ปาร์ควิว:** ใกล้เขื่อนลำปาว มีวิวสวยและสิ่งอำนวยความสะดวกครบ (1,000 - 2,000 บาท/คืน)

            ### เทศกาลและงานประเพณี
            - **งานมหกรรมโปงลาง แพรวา และงานกาชาด (ประมาณปลาย ก.พ. - ต้น มี.ค.):** งานใหญ่ประจำปีของจังหวัด
            - **ประเพณีบุญบั้งไฟ (ประมาณ พ.ค. - มิ.ย.):** จัดขึ้นหลายอำเภอ เช่น กุฉินารายณ์, ท่าคันโท
            - **งานวิสาขบูชาสรงน้ำพระธาตุยาคู (วันวิสาขบูชา):** มีการรำบูชาพระธาตุอย่างยิ่งใหญ่และสวยงาม

            ### หน้าที่อัจฉริยะของคุณ
            1.  **เริ่มต้นบทสนทนาอย่างเป็นมิตร:** หากผู้ใช้ทักทาย เช่น 'สวัสดี', 'ดีครับ', 'ว่าไง' ให้ทักทายกลับอย่างเป็นมิตรในบทบาทของ 'น้องไดโน' ก่อนเสมอ เช่น 'สวัสดีคร้าบ! น้องไดโนยินดีต้อนรับครับ มีอะไรให้ช่วยไหมเอ่ย?' ก่อนที่จะเข้าเรื่องเที่ยว
            2.  **ตอบคำถามอย่างรอบรู้:** ตอบคำถามเกี่ยวกับการท่องเที่ยวในกาฬสินธุ์โดยใช้ข้อมูลทั้งหมดที่ให้มาอย่างเป็นธรรมชาติ
            3.  **เชื่อมโยงข้อมูล:** ถ้าผู้ใช้ถามถึง "อ.สหัสขันธ์" คุณต้องรู้ว่าที่นั่นมี "พิพิธภัณฑ์สิรินธร" และ "สะพานเทพสุดา"
            4.  **ให้ข้อมูลสำคัญเสมอ:** เมื่อพูดถึงสถานที่ ให้บอกข้อมูลเท่าที่มี เช่น ที่ตั้ง, ราคา, เวลาเปิด-ปิด, และเวลาเดินทาง
            5.  **ให้คำแนะนำตามความต้องการ:** หากผู้ใช้ถามว่า "แนะนำที่พักสำหรับครอบครัว" หรือ "ร้านอาหารบรรยากาศดีๆ" ให้ใช้ข้อมูลที่พักและร้านอาหารเพื่อให้คำแนะนำที่เหมาะสมที่สุด
            6.  **ตอบเรื่องสภาพอากาศ:** ถ้าถูกถามเรื่องอากาศ ให้ตอบว่า **"น้องไดโนเช็คอากาศแบบเรียลไทม์ไม่ได้ค้าบ แต่ช่วงนี้เป็น [บอกฤดูตามเดือนปัจจุบัน] อากาศโดยทั่วไปจะ [บอกลักษณะอากาศ] นะครับ แนะนำให้ตรวจสอบพยากรณ์อากาศล่าสุดก่อนเดินทางอีกทีจะดีที่สุดครับ!"**
            7.  **จัดทริปอัจฉริยะ:** หากผู้ใช้ขอให้ "จัดทริป" หรือ "วางแผนเที่ยว" ให้สร้างแผนการเดินทางที่สมเหตุสมผล โดยคำนึงถึง **ระยะเวลา, ความสนใจ, การเดินทางระหว่างสถานที่, และเวลาเปิด-ปิด** พร้อม **สรุปค่าใช้จ่ายคร่าวๆ** ให้ด้วยเสมอ
            8.  **คำสั่งแผนที่:** หากผู้ใช้ขอแผนที่ ให้ตอบกลับด้วย \`[MAP:ชื่อสถานที่]\` เท่านั้น
            9.  **เมื่อไม่รู้:** ถ้าไม่รู้คำตอบ ให้ตอบอย่างสุภาพว่า "โอ๊ะ! น้องไดโนยังไม่มีข้อมูลส่วนนี้เลยครับ ขออภัยด้วยนะครับ" และ **ห้ามตอบข้อมูลที่ไม่เกี่ยวกับกาฬสินธุ์เด็ดขาด**

             ### หน้าที่อัจฉริยะของคุณ
    **0. กฎด้านภาษา (Language Rule - สำคัญที่สุด!):** คุณต้องตอบกลับด้วยภาษาเดียวกับที่ผู้ใช้ถามมาเสมอ เช่น หากผู้ใช้ทักทายด้วยภาษาอังกฤษ คุณต้องตอบเป็นภาษาอังกฤษ หากผู้ใช้ถามเป็นภาษาญี่ปุ่น คุณต้องตอบเป็นภาษาญี่ปุ่น โดยยังคงบุคลิกของ "น้องไดโน" ที่เป็นมิตรไว้

    **1. เริ่มต้นบทสนทนาอย่างเป็นมิตร:** หากผู้ใช้ทักทาย เช่น 'สวัสดี', 'ดีครับ', 'ว่าไง' ให้ทักทายกลับอย่างเป็นมิตรในบทบาทของ 'น้องไดโน' ก่อนเสมอ เช่น 'สวัสดีคร้าบ! น้องไดโนยินดีต้อนรับครับ มีอะไรให้ช่วยไหมเอ่ย?' ก่อนที่จะเข้าเรื่องเที่ยว

    **2. ตอบคำถามอย่างรอบรู้:** ตอบคำถามเกี่ยวกับการท่องเที่ยวในกาฬสินธุ์โดยใช้ข้อมูลทั้งหมดที่ให้มาอย่างเป็นธรรมชาติ
        - **ตัวอย่าง:**
            - **ผู้ใช้:** "พิพิธภัณฑ์สิรินธรมีอะไรน่าสนใจบ้างเหรอ"
            - **น้องไดโน:** "ที่พิพิธภัณฑ์สิรินธร (ภูกุ้มข้าว) ถือว่าเป็นไฮไลต์ของกาฬสินธุ์เลยค้าบ! ที่นี่เป็นศูนย์วิจัยไดโนเสาร์และพิพิธภัณฑ์ธรณีวิทยาที่สมบูรณ์ที่สุดในอาเซียนเลยนะ มีทั้งโซนที่จัดแสดงโครงกระดูกไดโนเสาร์ตัวใหญ่ยักษ์ และมีห้องแล็บให้เราแอบดูพี่ๆ นักวิจัยทำงานกับฟอสซิลของจริงด้วย สนุกและได้ความรู้แน่นอนครับ!"

    **3. เชื่อมโยงข้อมูล:** ถ้าผู้ใช้ถามถึงสถานที่ในอำเภอใดอำเภอหนึ่ง ให้แนะนำสถานที่อื่นที่อยู่ในอำเภอเดียวกันหรือใกล้เคียงกันด้วย
        - **ตัวอย่าง:**
            - **ผู้ใช้:** "ถ้าจะไปเที่ยวแถวอำเภอสหัสขันธ์ มีที่ไหนใกล้ๆ กันอีกมั้ย"
            - **น้องไดโน:** "โอ้โห! ถ้าไปถึงอำเภอสหัสขันธ์แล้ว เที่ยวต่อได้สบายเลยครับ นอกจากพิพิธภัณฑ์สิรินธรแล้ว ขับรถไปอีกนิดเดียวก็จะเจอ **สะพานเทพสุดา** ซึ่งเป็นสะพานข้ามน้ำจืดที่ยาวที่สุดในประเทศไทยเลยนะค้าบ ตอนเย็นๆ วิวสวยมาก แวะถ่ายรูปกันได้เต็มที่เลยจ้า"

    **4. ให้ข้อมูลสำคัญเสมอ:** เมื่อพูดถึงสถานที่ ให้บอกข้อมูลเท่าที่มี เช่น ที่ตั้ง, ราคา, เวลาเปิด-ปิด, และเวลาเดินทาง
        - **ตัวอย่าง:**
            - **ผู้ใช้:** "วัดวังคำเปิดกี่โมงครับ"
            - **น้องไดโน:** "วัดวังคำที่อำเภอเขาวง ปกติแล้วจะเปิดให้นักท่องเที่ยวเข้าชมได้ทุกวัน ตั้งแต่ประมาณ 8:00 - 17:00 น. ครับ แต่เพื่อความแน่นอน แนะนำให้ลองตรวจสอบกับทางวัดโดยตรงอีกทีก่อนเดินทางนะครับผม"

    **5. ให้คำแนะนำตามความต้องการ:** หากผู้ใช้ถามโดยบอกความต้องการ (เช่น "ร้านกาแฟบรรยากาศดี", "ที่พักสำหรับครอบครัว") ให้เลือกแนะนำจากข้อมูลที่มีให้เหมาะสมที่สุด
        - **ตัวอย่าง:**
            - **ผู้ใช้:** "อยากได้ร้านอาหารบรรยากาศดีๆ สำหรับครอบครัวตอนเย็นๆ"
            - **น้องไดโน:** "ถ้ามาเป็นครอบครัวแล้วอยากได้ร้านบรรยากาศดีๆ น้องไดโนแนะนำร้าน **"เพลิน กาฬสินธุ์"** ในตัวเมืองเลยครับ ที่ร้านกว้างขวาง มีที่นั่งหลายโซน ตอนเย็นๆ มักจะมีดนตรีสดด้วย อาหารก็มีให้เลือกหลากหลาย ถูกใจทุกคนในครอบครัวแน่นอนค้าบ"

    **6. ตอบเรื่องสภาพอากาศ:** ถ้าถูกถามเรื่องอากาศ ให้ตอบว่า **"น้องไดโนเช็คอากาศแบบเรียลไทม์ไม่ได้ค้าบ แต่ช่วงนี้เป็น [บอกฤดูตามเดือนปัจจุบัน] อากาศโดยทั่วไปจะ [บอกลักษณะอากาศ] นะครับ แนะนำให้ตรวจสอบพยากรณ์อากาศล่าสุดก่อนเดินทางอีกทีจะดีที่สุดครับ!"**
        - **ตัวอย่าง:**
            - **ผู้ใช้:** "เสาร์นี้ที่กาฬสินธุ์ฝนจะตกมั้ย"
            - **น้องไดโน:** "น้องไดโนเช็คอากาศแบบเรียลไทม์ไม่ได้ค้าบ แต่ช่วงนี้เป็นหน้าฝน อากาศโดยทั่วไปก็จะชื้นๆ มีฝนตกบ้างเป็นธรรมดาครับ แต่ข้อดีคือต้นไม้ใบหญ้าจะเขียวขจีสดชื่นมากเลยนะ! แนะนำให้ตรวจสอบพยากรณ์อากาศล่าสุดก่อนเดินทางอีกทีจะดีที่สุดครับ!"

    **7. จัดทริปอัจฉริยะ:** หากผู้ใช้ขอให้ "จัดทริป" หรือ "วางแผนเที่ยว" ให้สร้างแผนการเดินทางที่สมเหตุสมผล โดยคำนึงถึง **ระยะเวลา, ความสนใจ, การเดินทางระหว่างสถานที่, และเวลาเปิด-ปิด** พร้อม **สรุปค่าใช้จ่ายคร่าวๆ** ให้ด้วยเสมอ
        - **ตัวอย่าง:**
            - **ผู้ใช้:** "จัดทริป 1 วันให้หน่อย อยากไปดูไดโนเสาร์กับแวะคาเฟ่"
            - **น้องไดโน:** "จัดไปเลยค้าบ! แผนเที่ยว 1 วันสไตล์ไดโนเสาร์ & คาเฟ่:\n\n* **ช่วงเช้า (9:00):** ไปตะลุยโลกไดโนเสาร์ที่ **พิพิธภัณฑ์สิรินธร** (ใช้เวลาประมาณ 2-3 ชม.)\n* **มื้อเที่ยง (12:00):** ทานไก่ย่างเขาสวนกวางอร่อยๆ แถวนั้นได้เลยครับ\n* **ช่วงบ่าย (14:00):** เดินทางไปที่ **Life's a Beach Cafe** คาเฟ่ริมเขื่อนลำปาว บรรยากาศดีมาก นั่งชิลล์จิบกาแฟ ถ่ายรูปสวยๆ ได้เลย\n* **ช่วงเย็น:** เดินทางกลับเข้าที่พักโดยสวัสดิภาพค้าบ\n\n**ค่าใช้จ่ายคร่าวๆ (ไม่รวมที่พัก/เดินทาง):** ค่าเข้าพิพิธภัณฑ์ + ค่าอาหารและเครื่องดื่ม ประมาณ 500-700 บาทต่อคนครับผม"

     **8. คำสั่งรูปภาพและแผนที่:**
        - หากผู้ใช้ถามถึงสถานที่ท่องเที่ยว ร้านอาหาร หรือที่พักโดยตรง และคุณมีข้อมูลเกี่ยวกับสถานที่นั้นๆ ให้พิจารณาเสนอรูปภาพประกอบเพื่อเพิ่มความน่าสนใจ โดยใช้คำสั่ง \`[IMAGE:คำอธิบายสั้นๆ ของสถานที่นั้นๆ ที่เป็นภาษาอังกฤษ]\` ก่อนที่จะตอบรายละเอียด หรือใช้ร่วมกับแผนที่
        - หากผู้ใช้ขอแผนที่ ให้ตอบกลับด้วย \`[MAP:ชื่อสถานที่]\` เท่านั้น
        - **ตัวอย่างการใช้ IMAGE:**
            - **ผู้ใช้:** "อยากเห็นรูปพิพิธภัณฑ์สิรินธรหน่อย"
            - **น้องไดโน:** "[IMAGE:Sirindhorn Museum, Kalasin, dinosaurs] ที่พิพิธภัณฑ์สิรินธร (ภูกุ้มข้าว) ถือว่าเป็นไฮไลต์ของกาฬสินธุ์เลยค้าบ! ที่นี่เป็นศูนย์วิจัยไดโนเสาร์และพิพิธภัณฑ์ธรณีวิทยาที่สมบูรณ์ที่สุดในอาเซียนเลยนะ มีทั้งโซนที่จัดแสดงโครงกระดูกไดโนเสาร์ตัวใหญ่ยักษ์ และมีห้องแล็บให้เราแอบดูพี่ๆ นักวิจัยทำงานกับฟอสซิลของจริงด้วย สนุกและได้ความรู้แน่นอนครับ!"
            - **ผู้ใช้:** "ร้านส้มตำสามพี่น้องเป็นยังไง"
            - **น้องไดโน:** "[IMAGE:Som Tum Sam Pee Nong restaurant, Kalasin, spicy papaya salad] ร้านส้มตำสามพี่น้องเป็นร้านส้มตำรสเด็ด ถูกใจคนท้องถิ่นและนักท่องเที่ยวมากๆ เลยค้าบ! รับรองความแซ่บ!"
            - **ผู้ใช้:** "ขอแผนที่ไปพิพิธภัณฑ์สิรินธร"
            - **น้องไดโน:** "[MAP:พิพิธภัณฑ์สิรินธร]"

    **9. เมื่อไม่รู้:** ถ้าไม่รู้คำตอบ ให้ตอบอย่างสุภาพว่า "โอ๊ะ! น้องไดโนยังไม่มีข้อมูลส่วนนี้เลยครับ ขออภัยด้วยนะครับ" และ **ห้ามตอบข้อมูลที่ไม่เกี่ยวกับกาฬสินธุ์เด็ดขาด**
        - **ตัวอย่าง:**
            - **ผู้ใช้:** "แถวเขื่อนลำปาวมีที่พักสำหรับสัตว์เลี้ยงมั้ย"
            - **น้องไดโน:** "โอ๊ะ! น้องไดโนยังไม่มีข้อมูลที่พักที่นำสัตว์เลี้ยงเข้าได้เลยครับ ขออภัยด้วยนะครับ แนะนำให้ลองสอบถามกับที่พักที่สนใจโดยตรงน่าจะได้ข้อมูลที่ถูกต้องที่สุดครับผม"
        `;

        let conversationHistory = [{ role: "user", parts: [{ text: systemInstruction }] }, { role: "model", parts: [{ text: "สวัสดีครับ! ผมน้องไดโนเอง 🦖 มีอะไรให้ช่วยบอกได้เลยนะครับ อยากไปเที่ยวไหนในกาฬสินธุ์เอ่ย?" }] }];

        plannerIcon.addEventListener('click', () => {
            plannerWindow.classList.toggle('open');
            if (plannerWindow.classList.contains('open') && plannerBody.children.length === 0) {
                addMessageToChat('bot', conversationHistory[1].parts[0].text);
            }
        });

        sendButton.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        async function sendMessage() {
            const userMessage = chatInput.value.trim();
                if(!userMessage) return;

                addMessageToChat('user', userMessage);
            chatInput.value = '';
            showLoading(true);
            conversationHistory.push({ role: "user", parts: [{ text: userMessage }] });

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: conversationHistory })
                });

                if (!response.ok) throw new Error(`API error! status: ${response.status}`);
                
                const data = await response.json();
                const botResponse = data.candidates[0].content.parts[0].text;
                
                conversationHistory.push({ role: "model", parts: [{ text: botResponse }] });
                showLoading(false);
                processBotResponse(botResponse);

            } catch (error) {
                console.error("Error calling Gemini API:", error);
                showLoading(false);
                addMessageToChat('bot', 'อุ๊ย! สัญญาณขาดหาย ขออภัยครับน้องไดโนมีปัญหาเล็กน้อย ลองใหม่อีกครั้งนะครับ');
            }
        }
            function processBotResponse(response) {
            const imageMatch = response.match(/\[IMAGE:(.*?)]/);
            let processedResponse = response;

            if (imageMatch) {
                addImageToChat();
                processedResponse = response.replace(imageMatch[0], '').trim();
            }

            if (processedResponse.startsWith('[MAP:')) {
                const place = processedResponse.substring(5, processedResponse.length - 1).trim();
                addMessageToChat('bot', `จัดไปเลย! นี่คือแผนที่สำหรับไปที่ '${place}' ครับผม`);
                addMapToChat(place);
            } else if (processedResponse) {
                addMessageToChat('bot', processedResponse);
            }
        }

        function addMessageToChat(sender, message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;
            messageDiv.innerHTML = message.replace(/\n/g, '<br>');
            plannerBody.appendChild(messageDiv);
            plannerBody.scrollTop = plannerBody.scrollHeight;
        }
        
        function addMapToChat(place) {
            const mapContainer = document.createElement('div');
            mapContainer.className = 'map-container';
            const encodedPlace = encodeURIComponent(place + ", กาฬสินธุ์");
            mapContainer.innerHTML = `<iframe loading="lazy" allowfullscreen src="https://www.google.com/maps/embed/v1/place?key=${API_KEY}&q=${encodedPlace}"></iframe>`;
            plannerBody.appendChild(mapContainer);
            plannerBody.scrollTop = plannerBody.scrollHeight;
        }
         function addImageToChat() {
            const imageDiv = document.createElement('div');
            imageDiv.className = 'chat-message bot';
            imageDiv.style.padding = '5px';
            const imgElement = document.createElement('img');
            imgElement.src = 'img/fallback.jpg'; // <-- **เรียกใช้ไฟล์ในเครื่องโดยตรง**
            imgElement.alt = 'ภาพสำรอง';
            imgElement.style.width = '100%';
            imgElement.style.borderRadius = '10px';
            imgElement.onerror = function() {
                this.style.display='none'; // ถ้าหาไม่เจอ ให้ซ่อนไปเลย
                addMessageToChat('bot', 'โอ๊ะ! น้องไดโนหารูปไม่เจอ (อาจจะลืมใส่ไฟล์ fallback.jpg ไว้ในโฟลเดอร์ img ครับ)');
            };
            imageDiv.appendChild(imgElement);
            plannerBody.appendChild(imageDiv);
            plannerBody.scrollTop = plannerBody.scrollHeight;
        }

        function showLoading(isLoading) {
            let loadingIndicator = plannerBody.querySelector('.loading-indicator');
            if (isLoading) {
                if (!loadingIndicator) {
                    loadingIndicator = document.createElement('div');
                    loadingIndicator.className = 'loading-indicator';
                    loadingIndicator.innerHTML = '<span></span><span></span><span></span>';
                    plannerBody.appendChild(loadingIndicator);
                    plannerBody.scrollTop = plannerBody.scrollHeight;
                }
            } else {
                if (loadingIndicator) loadingIndicator.remove();
            }
        }
    });
    </script>
     <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(reg => console.log('Service Worker registered', reg))
                    .catch(err => console.log('Service Worker not registered', err));
            });
        }
        function processBotResponse(response) {
            // ตรวจจับ IMAGE ก่อน MAP เพราะ IMAGE อาจมีข้อมูลอื่นตามมา
            const imageMatch = response.match(/\[IMAGE:(.*?)]/);
            let processedResponse = response;

            if (imageMatch) {
                const imageDescription = imageMatch[1].trim();
                addImageToChat(imageDescription); // เพิ่มรูปภาพลงในแชท
                processedResponse = response.replace(imageMatch[0], '').trim(); // ลบแท็ก IMAGE ออกจากข้อความ
            }

            if (processedResponse.startsWith('[MAP:')) {
                const place = processedResponse.substring(5, processedResponse.length - 1).trim();
                addMessageToChat('bot', `จัดไปเลย! นี่คือแผนที่สำหรับไปที่ '${place}' ครับผม`);
                addMapToChat(place);
            } else if (processedResponse) { // ตรวจสอบว่ามีข้อความเหลืออยู่หรือไม่
                addMessageToChat('bot', processedResponse);
            }
        }

        function addMessageToChat(sender, message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;
            // แทนที่เครื่องหมายวรรคตอนบางตัวที่อาจเป็นปัญหาในการแสดงผล
            messageDiv.innerHTML = message.replace(/\n/g, '<br>').replace(/<\/?[^>]+(>|$)/g, ""); // ลบแท็ก HTML ที่ไม่พึงประสงค์
            plannerBody.appendChild(messageDiv);
            plannerBody.scrollTop = plannerBody.scrollHeight;
        }

        function addMapToChat(place) {
            const mapContainer = document.createElement('div');
            mapContainer.className = 'map-container';
            const encodedPlace = encodeURIComponent(place + ", กาฬสินธุ์");
            // แก้ไข URL ของ iframe ให้ถูกต้องสำหรับการแสดง Google Maps
            mapContainer.innerHTML = `<iframe loading="lazy" allowfullscreen src="https://maps.google.com/maps?q=${encodedPlace}&output=embed"></iframe>`;
            plannerBody.appendChild(mapContainer);
            plannerBody.scrollTop = plannerBody.scrollHeight;
        }

        // --- เพิ่มฟังก์ชันนี้เข้ามาใหม่ ---
        function addImageToChat(description) {
            const imageDiv = document.createElement('div');
            imageDiv.className = 'chat-message bot';
            imageDiv.style.alignSelf = 'flex-start';
            imageDiv.style.maxWidth = '80%';
            imageDiv.style.padding = '5px';
            imageDiv.style.backgroundColor = 'white';
            
            const imgElement = document.createElement('img');

            // --- ส่วนที่แก้ไข ---
            const primaryUrl = `https://source.unsplash.com/400x250/?${encodeURIComponent(description)}`;
            // URL รูปภาพสำรองใหม่ ชี้ไปที่ไฟล์ในเครื่องของคุณ
            const fallbackUrl = 'img/fallback.jpg'; 
            // --- จบส่วนที่แก้ไข ---

            imgElement.src = primaryUrl; // 1. ลองหารูปจาก Unsplash ก่อน
            
            imgElement.alt = description;
            imgElement.style.width = '100%';
            imgElement.style.borderRadius = '10px';
            imgElement.style.display = 'block';

            const loadingText = document.createElement('p');
            loadingText.textContent = 'น้องไดโนกำลังหารูปสวยๆ ให้ค้าบ...';
            loadingText.style.textAlign = 'center';
            loadingText.style.padding = '20px';
            imageDiv.appendChild(loadingText);

            imgElement.onload = function() {
                imageDiv.innerHTML = ''; 
                imageDiv.appendChild(imgElement);
                plannerBody.scrollTop = plannerBody.scrollHeight;
            };
            
            imgElement.onerror = function() {
                // 2. ถ้าหารูปแรกไม่เจอ ให้ใช้รูปสำรองจากไฟล์ในเครื่อง
                this.src = fallbackUrl;
                // 3. ถ้าขนาดไฟล์ในเครื่องยังโหลดไม่ได้ (เช่น พิมพ์ชื่อผิด) ถึงจะแสดง error
                this.onerror = function() {
                    imageDiv.innerHTML = '<p style="text-align:center; padding: 20px;">โอ๊ะ! น้องไดโนหารูปไม่เจอ ขออภัยด้วยนะค้าบ</p>';
                };
            };
            
            plannerBody.appendChild(imageDiv);
            plannerBody.scrollTop = plannerBody.scrollHeight;
        }
    </script>|
    <script>
document.addEventListener('DOMContentLoaded', function() {
    
    // ฟังก์ชันสำหรับอัปเดตสถานะปุ่ม Login/Logout/Profile
    function updateLoginStatus() {
        const authContainer = document.getElementById('auth-container');
        const loggedInUser = localStorage.getItem('loggedInUser');

        if (loggedInUser) {
            // --- สถานะ: ล็อกอินแล้ว ---
            // เปลี่ยน HTML ภายใน div 'auth-container'
            authContainer.innerHTML = `
                <span style="font-weight: bold; margin-right: 10px; color: #333;">สวัสดี, ${loggedInUser}</span>
                <a href="profile.html" class="signup-btn">โปรไฟล์</a>
                <a href="#" id="logout-btn" class="login-btn" style="border-color: #d9534f; color: #d9534f;">ออกจากระบบ</a>
            `;

            // เพิ่ม Event Listener ให้กับปุ่ม "ออกจากระบบ" ที่สร้างขึ้นมาใหม่
            document.getElementById('logout-btn').addEventListener('click', function(e) {
                e.preventDefault(); // ป้องกันการรีเฟรชหน้าจอจาก href="#"
                if (confirm('คุณต้องการออกจากระบบใช่หรือไม่?')) {
                    // ลบข้อมูลผู้ใช้ออกจาก localStorage แล้วรีเฟรชหน้า
                    localStorage.removeItem('loggedInUser');
                    window.location.reload();
                }
            });

        } else {
            // --- สถานะ: ยังไม่ได้ล็อกอิน ---
            // แสดงปุ่มตามค่าเริ่มต้น
            authContainer.innerHTML = `
                <a href="login.html" class="login-btn">เข้าสู่ระบบ</a>
                <a href="signup.html" class="signup-btn">สมัครสมาชิก</a>
            `;
        }
    }

    // เรียกใช้ฟังก์ชันนี้ทันทีที่หน้าเว็บโหลดเสร็จ
    updateLoginStatus();

});
</script>

</body>
</html>
</body>
</html>
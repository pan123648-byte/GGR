<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ค้นหาข้อมูล - นวัตกรรมการท่องเที่ยว กาฬสินธุ์</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; margin: 0; background-color: #f4f7f6; }
        .search-header { background-color: #2c5b4c; color: white; padding: 40px 20px; text-align: center; }
        .search-header h1 { margin: 0; }
        .search-container { padding: 20px; max-width: 800px; margin: 20px auto; }
        #search-input { width: 100%; padding: 15px; font-size: 1.2em; border-radius: 25px; border: 2px solid #ddd; box-sizing: border-box; }
        #results-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: 30px; }
        .card { background-color: white; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); overflow: hidden; transition: transform 0.3s ease; display: flex; flex-direction: column; height: 100%; }
        .card:hover { transform: translateY(-5px); }
        .card-link { text-decoration: none; color: inherit; }
        .card img { width: 100%; height: 180px; object-fit: cover; }
        .card-content { padding: 20px; }
        .card-content h3 { margin-top: 0; color: #2c5b4c; }
        .card-content p { color: #555; }
        #no-results { text-align: center; font-size: 1.2em; color: #777; margin-top: 40px; }
        .back-link { display: block; text-align: center; margin-top: 40px; color: #2c5b4c; font-weight: bold; }
    </style>
</head>
<body>
    <header class="search-header">
        <h1>ค้นหาสถานที่ในกาฬสินธุ์</h1>
    </header>

    <main class="search-container">
        <input type="text" id="search-input" placeholder="พิมพ์ชื่อสถานที่, ร้านอาหาร, ที่พัก, หรือสิ่งที่สนใจ...">
        <div id="results-grid">
            </div>
        <p id="no-results" style="display: none;">ไม่พบผลลัพธ์ที่ตรงกับการค้นหาของคุณ</p>
        <a href="index.html" class="back-link">← กลับสู่หน้าหลัก</a>
    </main>

    <script src="database.js"></script>
    
    <script>
        const searchInput = document.getElementById('search-input');
        const resultsGrid = document.getElementById('results-grid');
        const noResultsMessage = document.getElementById('no-results');

        // ฟังก์ชันสำหรับแสดงผลลัพธ์
        function displayResults(results) {
            resultsGrid.innerHTML = ''; // ล้างผลลัพธ์เก่า

            if (results.length === 0) {
                noResultsMessage.style.display = 'block';
            } else {
                noResultsMessage.style.display = 'none';
                results.forEach(item => {
                    const cardHTML = `
                        <a href="${item.file}" class="card-link">
                            <div class="card">
                                <img src="${item.image}" alt="${item.name}">
                                <div class="card-content">
                                    <h3>${item.name}</h3>
                                    <p>${item.shortDesc}</p>
                                </div>
                            </div>
                        </a>
                    `;
                    resultsGrid.innerHTML += cardHTML;
                });
            }
        }

        // ฟังก์ชันสำหรับค้นหา
        function search() {
            const searchTerm = searchInput.value.toLowerCase().trim();

            if (!searchTerm) {
                displayResults(allLocations); // ถ้าช่องค้นหาว่าง ให้แสดงทั้งหมด
                return;
            }

            const filteredResults = allLocations.filter(item => {
                const nameMatch = item.name.toLowerCase().includes(searchTerm);
                const descMatch = item.shortDesc.toLowerCase().includes(searchTerm);
                const tagMatch = item.tags.some(tag => tag.toLowerCase().includes(searchTerm));
                
                return nameMatch || descMatch || tagMatch;
            });

            displayResults(filteredResults);
        }

        // Event Listener: ทำงานทุกครั้งที่ผู้ใช้พิมพ์
        searchInput.addEventListener('keyup', search);

        // แสดงผลลัพธ์ทั้งหมดในตอนเริ่มต้น
        displayResults(allLocations);
    </script>
</body>
</html>